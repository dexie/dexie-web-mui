1:"$Sreact.fragment"
3:I[98882,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js"],"default"]
4:I[52669,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js"],"default"]
5:I[17350,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js"],"default"]
6:I[11054,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js"],"default"]
7:I[53675,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js"],"default"]
8:I[45678,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js"],"default"]
9:I[39756,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/7dd66bdf8a7e5707.js"],"default"]
a:I[37457,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/7dd66bdf8a7e5707.js"],"default"]
11:I[68027,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js"],"default"]
:HL["/_next/static/chunks/181ad6fb1547b71a.css","style"]
:HL["/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/ce62453a442c7f35-s.p.a9507876.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
2:T60b,{"@context":"https://schema.org","@type":"SoftwareApplication","name":"Dexie.js","description":"IndexedDB wrapper library for offline-first web applications with real-time sync capabilities","url":"https://dexie.org","applicationCategory":"DeveloperApplication","operatingSystem":"Web Browser","programmingLanguage":"JavaScript","author":{"@type":"Person","name":"David Fahlander","url":"https://github.com/dfahlander"},"publisher":{"@type":"Organization","name":"Awarica AB","address":{"@type":"PostalAddress","addressCountry":"SE","addressLocality":"Stockholm"}},"softwareVersion":"4.0","downloadUrl":"https://www.npmjs.com/package/dexie","license":"https://github.com/dexie/Dexie.js/blob/master/LICENSE","codeRepository":"https://github.com/dexie/Dexie.js","installUrl":"https://www.npmjs.com/package/dexie","screenshot":"https://dexie.org/assets/images/dexie-hero-og.jpg","offers":[{"@type":"Offer","name":"Dexie.js Open Source","price":"0","priceCurrency":"USD","description":"Free IndexedDB wrapper library"},{"@type":"Offer","name":"Dexie Cloud Free","price":"0","priceCurrency":"USD","description":"Free tier with 3 production users and 100MB storage"},{"@type":"Offer","name":"Dexie Cloud Production","price":"0.12","priceCurrency":"USD","description":"Production tier starting at $0.12 per user per month"}],"featureList":["Offline-first database","IndexedDB wrapper","Real-time synchronization","Authentication system","Collaborative features","React integration","Vue.js support","Angular compatibility","Progressive Web App support"]}0:{"P":null,"b":"mvVUpO82w-KH8Mmy2Dw-C","p":"","c":["","docs","Cloud","consistency"],"i":false,"f":[[["",{"children":["docs",{"children":[["slug","Cloud/consistency","c"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/181ad6fb1547b71a.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","script","script-0",{"src":"/_next/static/chunks/f6023188028df157.js","async":true,"nonce":"$undefined"}],["$","script","script-1",{"src":"/_next/static/chunks/ff5f09f4edae29eb.js","async":true,"nonce":"$undefined"}],["$","script","script-2",{"src":"/_next/static/chunks/68e80996639386d6.js","async":true,"nonce":"$undefined"}],["$","script","script-3",{"src":"/_next/static/chunks/616d70b9d5b07f10.js","async":true,"nonce":"$undefined"}],["$","script","script-4",{"src":"/_next/static/chunks/f7ca7d40a7605a95.js","async":true,"nonce":"$undefined"}]],["$","html",null,{"lang":"en","className":"roboto_d24be3b7-module__pZO6tq__variable","children":[["$","head",null,{"children":["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"$2"}}]}],["$","body",null,{"className":"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable","children":[["$","$L3",null,{}],["$","$L4",null,{"children":["$","$L5",null,{"theme":"$6","children":[["$","$L7",null,{}],["$","$L8",null,{}],["$","$L9",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],"$Lb"]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}],"$Lc"]}]}]]}]]}]]}],{"children":["docs","$Ld",{"children":[["slug","Cloud/consistency","c"],"$Le",{"children":["__PAGE__","$Lf",{},null,false]},null,false]},null,false]},null,false],"$L10",false]],"m":"$undefined","G":["$11",["$L12"]],"s":false,"S":true}
13:I[13642,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js"],"default"]
15:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/7dd66bdf8a7e5707.js"],"OutletBoundary"]
17:I[11533,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/7dd66bdf8a7e5707.js"],"AsyncMetadataOutlet"]
19:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/7dd66bdf8a7e5707.js"],"ViewportBoundary"]
1b:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/7dd66bdf8a7e5707.js"],"MetadataBoundary"]
1c:"$Sreact.suspense"
b:["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]
c:["$","$L13",null,{}]
d:["$","$1","c",{"children":[null,["$","$L9",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}]
e:["$","$1","c",{"children":[null,["$","$L9",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}]
f:["$","$1","c",{"children":["$L14",[["$","script","script-0",{"src":"/_next/static/chunks/b544468eebbd739a.js","async":true,"nonce":"$undefined"}],["$","script","script-1",{"src":"/_next/static/chunks/b3354f279df46dba.js","async":true,"nonce":"$undefined"}]],["$","$L15",null,{"children":["$L16",["$","$L17",null,{"promise":"$@18"}]]}]]}]
10:["$","$1","h",{"children":[null,[["$","$L19",null,{"children":"$L1a"}],["$","meta",null,{"name":"next-size-adjust","content":""}]],["$","$L1b",null,{"children":["$","div",null,{"hidden":true,"children":["$","$1c",null,{"fallback":null,"children":"$L1d"}]}]}]]}]
12:["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/181ad6fb1547b71a.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]
1e:I[99748,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js","/_next/static/chunks/b544468eebbd739a.js","/_next/static/chunks/b3354f279df46dba.js"],"default"]
14:["$","$L1e",null,{"navigation":{"API-Reference":{"title":"API Reference","slug":"API-Reference","layout":"docs"},"Cloud":{"DBPermissionSet":{"title":"DBPermissionSet","slug":"Cloud/DBPermissionSet","layout":"docs-dexie-cloud"},"DexieCloudOptions":{"title":"DexieCloudOptions","slug":"Cloud/DexieCloudOptions","layout":"docs-dexie-cloud"},"Invite":{"title":"Invite","slug":"Cloud/Invite","layout":"docs-dexie-cloud"},"Member":{"title":"Member","slug":"Cloud/Member","layout":"docs-dexie-cloud"},"PersistedSyncState":{"title":"PersistedSyncState","slug":"Cloud/PersistedSyncState","layout":"docs-dexie-cloud"},"Realm":{"title":"Realm","slug":"Cloud/Realm","layout":"docs-dexie-cloud"},"Role":{"title":"Role","slug":"Cloud/Role","layout":"docs-dexie-cloud"},"SyncState":{"title":"SyncState","slug":"Cloud/SyncState","layout":"docs-dexie-cloud"},"UserLogin":{"title":"UserLogin","slug":"Cloud/UserLogin","layout":"docs-dexie-cloud"},"access-control":{"title":"Access Control in Dexie Cloud","slug":"Cloud/access-control","layout":"docs-dexie-cloud"},"add-demo-users":{"title":"Add demo users","slug":"Cloud/add-demo-users","layout":"docs-dexie-cloud"},"add-public-data":{"title":"Add public data","slug":"Cloud/add-public-data","layout":"docs-dexie-cloud"},"authentication":{"title":"Authentication in Dexie Cloud","slug":"Cloud/authentication","layout":"docs-dexie-cloud"},"best-practices":{"title":"Dexie Cloud Best Practices","slug":"Cloud/best-practices","layout":"docs-dexie-cloud"},"cli":{"title":"Dexie Cloud CLI","slug":"Cloud/cli","layout":"docs-dexie-cloud"},"consistency":{"title":"Consistency in Dexie Cloud","slug":"Cloud/consistency","layout":"docs-dexie-cloud"},"custom-emails":{"title":"Custom Emails in Dexie Cloud","slug":"Cloud/custom-emails","layout":"docs-dexie-cloud"},"db.cloud.configure()":{"title":"db.cloud.configure()","slug":"Cloud/db.cloud.configure()","layout":"docs-dexie-cloud"},"db.cloud.currentUser":{"title":"db.cloud.currentUser","slug":"Cloud/db.cloud.currentUser","layout":"docs-dexie-cloud"},"db.cloud.currentUserId":{"title":"db.cloud.currentUserId","slug":"Cloud/db.cloud.currentUserId","layout":"docs-dexie-cloud"},"db.cloud.events.syncComplete":{"title":"db.cloud.events.syncComplete","slug":"Cloud/db.cloud.events.syncComplete","layout":"docs-dexie-cloud"},"db.cloud.invites":{"title":"db.cloud.invites","slug":"Cloud/db.cloud.invites","layout":"docs-dexie-cloud"},"db.cloud.login()":{"title":"db.cloud.login()","slug":"Cloud/db.cloud.login()","layout":"docs-dexie-cloud"},"db.cloud.logout()":{"title":"db.cloud.logout()","slug":"Cloud/db.cloud.logout()","layout":"docs-dexie-cloud"},"db.cloud.options":{"title":"db.cloud.options","slug":"Cloud/db.cloud.options","layout":"docs-dexie-cloud"},"db.cloud.permissions()":{"title":"db.cloud.permissions()","slug":"Cloud/db.cloud.permissions()","layout":"docs-dexie-cloud"},"db.cloud.persistedSyncState":{"title":"db.cloud.persistedSyncState","slug":"Cloud/db.cloud.persistedSyncState","layout":"docs-dexie-cloud"},"db.cloud.roles":{"title":"db.cloud.roles","slug":"Cloud/db.cloud.roles","layout":"docs-dexie-cloud"},"db.cloud.schema":{"title":"db.cloud.schema","slug":"Cloud/db.cloud.schema","layout":"docs-dexie-cloud"},"db.cloud.sync()":{"title":"db.cloud.sync()","slug":"Cloud/db.cloud.sync()","layout":"docs-dexie-cloud"},"db.cloud.syncState":{"title":"db.cloud.syncState","slug":"Cloud/db.cloud.syncState","layout":"docs-dexie-cloud"},"db.cloud.userInteraction":{"title":"db.cloud.userInteraction","slug":"Cloud/db.cloud.userInteraction","layout":"docs-dexie-cloud"},"db.cloud.usingServiceWorker":{"title":"db.cloud.usingServiceWorker","slug":"Cloud/db.cloud.usingServiceWorker","layout":"docs-dexie-cloud"},"db.cloud.version":{"title":"db.cloud.version","slug":"Cloud/db.cloud.version","layout":"docs-dexie-cloud"},"db.cloud.webSocketStatus":{"title":"db.cloud.webSocketStatus","slug":"Cloud/db.cloud.webSocketStatus","layout":"docs-dexie-cloud"},"db.members":{"title":"db.members","slug":"Cloud/db.members","layout":"docs-dexie-cloud"},"db.realms":{"title":"db.realms","slug":"Cloud/db.realms","layout":"docs-dexie-cloud"},"db.roles":{"title":"db.roles","slug":"Cloud/db.roles","layout":"docs-dexie-cloud"},"dexie-cloud-addon":{"title":"dexie-cloud-addon","slug":"Cloud/dexie-cloud-addon","layout":"docs-dexie-cloud"},"dexie-cloud-api":{"title":"Dexie Cloud API","slug":"Cloud/dexie-cloud-api","layout":"docs-dexie-cloud"},"index":{"title":"Dexie Cloud Docs","slug":"Cloud/index","layout":"docs-dexie-cloud"},"limits":{"title":"Dexie Cloud API Limits","slug":"Cloud/limits","layout":"docs-dexie-cloud"},"premium-software":{"title":"Run Dexie Cloud on Own Servers","slug":"Cloud/premium-software","layout":"docs-dexie-cloud"},"quickstart":{"title":"Dexie Cloud Quickstart","slug":"Cloud/quickstart","layout":"docs-dexie-cloud"},"rest-api":{"title":"Dexie Cloud REST API","slug":"Cloud/rest-api","layout":"docs-dexie-cloud"},"scaling":{"title":"Sharding and Scalability","slug":"Cloud/scaling","layout":"docs-dexie-cloud"},"web-hooks":{"title":"Dexie Cloud Web Hooks","slug":"Cloud/web-hooks","layout":"docs-dexie-cloud"}},"Collection":{"Collection.and()":{"title":"Collection.and()","slug":"Collection/Collection.and()","layout":"docs"},"Collection.clone()":{"title":"Collection.clone()","slug":"Collection/Collection.clone()","layout":"docs"},"Collection.count()":{"title":"Collection.count()","slug":"Collection/Collection.count()","layout":"docs"},"Collection.delete()":{"title":"Collection.delete()","slug":"Collection/Collection.delete()","layout":"docs"},"Collection.desc()":{"title":"Collection.desc()","slug":"Collection/Collection.desc()","layout":"docs"},"Collection.distinct()":{"title":"Collection.distinct()","slug":"Collection/Collection.distinct()","layout":"docs"},"Collection.each()":{"title":"Collection.each()","slug":"Collection/Collection.each()","layout":"docs"},"Collection.eachKey()":{"title":"Collection.eachKey()","slug":"Collection/Collection.eachKey()","layout":"docs"},"Collection.eachPrimaryKey()":{"title":"Collection.eachPrimaryKey()","slug":"Collection/Collection.eachPrimaryKey()","layout":"docs"},"Collection.eachUniqueKey()":{"title":"Collection.eachUniqueKey()","slug":"Collection/Collection.eachUniqueKey()","layout":"docs"},"Collection.filter()":{"title":"Collection.filter()","slug":"Collection/Collection.filter()","layout":"docs"},"Collection.first()":{"title":"Collection.first()","slug":"Collection/Collection.first()","layout":"docs"},"Collection.keys()":{"title":"Collection.keys()","slug":"Collection/Collection.keys()","layout":"docs"},"Collection.last()":{"title":"Collection.last()","slug":"Collection/Collection.last()","layout":"docs"},"Collection.limit()":{"title":"Collection.limit()","slug":"Collection/Collection.limit()","layout":"docs"},"Collection":{"title":"Collection","slug":"Collection/Collection","layout":"docs"},"Collection.modify()":{"title":"Collection.modify()","slug":"Collection/Collection.modify()","layout":"docs"},"Collection.offset()":{"title":"Collection.offset()","slug":"Collection/Collection.offset()","layout":"docs"},"Collection.or()":{"title":"Collection.or()","slug":"Collection/Collection.or()","layout":"docs"},"Collection.primaryKeys()":{"title":"Collection.primaryKeys()","slug":"Collection/Collection.primaryKeys()","layout":"docs"},"Collection.raw()":{"title":"Collection.raw()","slug":"Collection/Collection.raw()","layout":"docs"},"Collection.reverse()":{"title":"Collection.reverse()","slug":"Collection/Collection.reverse()","layout":"docs"},"Collection.sortBy()":{"title":"Collection.sortBy()","slug":"Collection/Collection.sortBy()","layout":"docs"},"Collection.toArray()":{"title":"Collection.toArray()","slug":"Collection/Collection.toArray()","layout":"docs"},"Collection.uniqueKeys()":{"title":"Collection.uniqueKeys()","slug":"Collection/Collection.uniqueKeys()","layout":"docs"},"Collection.until()":{"title":"Collection.until()","slug":"Collection/Collection.until()","layout":"docs"}},"Compound-Index":{"title":"Compound Index","slug":"Compound-Index","layout":"docs"},"DBCore":{"DBCore":{"title":"DBCore","slug":"DBCore/DBCore","layout":"docs"},"DBCoreAddRequest":{"title":"DBCoreAddRequest","slug":"DBCore/DBCoreAddRequest","layout":"docs"},"DBCoreCountRequest":{"title":"DBCoreCountRequest","slug":"DBCore/DBCoreCountRequest","layout":"docs"},"DBCoreCursor":{"title":"DBCoreCursor","slug":"DBCore/DBCoreCursor","layout":"docs"},"DBCoreDeleteRangeRequest":{"title":"DBCoreDeleteRangeRequest","slug":"DBCore/DBCoreDeleteRangeRequest","layout":"docs"},"DBCoreDeleteRequest":{"title":"DBCoreDeleteRequest","slug":"DBCore/DBCoreDeleteRequest","layout":"docs"},"DBCoreGetManyRequest":{"title":"DBCoreGetManyRequest","slug":"DBCore/DBCoreGetManyRequest","layout":"docs"},"DBCoreGetRequest":{"title":"DBCoreGetRequest","slug":"DBCore/DBCoreGetRequest","layout":"docs"},"DBCoreIndex":{"title":"DBCoreIndex","slug":"DBCore/DBCoreIndex","layout":"docs"},"DBCoreKeyRange":{"title":"DBCoreKeyRange","slug":"DBCore/DBCoreKeyRange","layout":"docs"},"DBCoreMutateRequest":{"title":"DBCoreMutateRequest","slug":"DBCore/DBCoreMutateRequest","layout":"docs"},"DBCoreMutateResponse":{"title":"DBCoreMutateResponse","slug":"DBCore/DBCoreMutateResponse","layout":"docs"},"DBCoreOpenCursorRequest":{"title":"DBCoreOpenCursorRequest","slug":"DBCore/DBCoreOpenCursorRequest","layout":"docs"},"DBCorePutRequest":{"title":"DBCorePutRequest","slug":"DBCore/DBCorePutRequest","layout":"docs"},"DBCoreQuery":{"title":"DBCoreQuery","slug":"DBCore/DBCoreQuery","layout":"docs"},"DBCoreQueryRequest":{"title":"DBCoreQueryRequest","slug":"DBCore/DBCoreQueryRequest","layout":"docs"},"DBCoreQueryResponse":{"title":"DBCoreQueryResponse","slug":"DBCore/DBCoreQueryResponse","layout":"docs"},"DBCoreRangeType":{"title":"DBCoreRangeType","slug":"DBCore/DBCoreRangeType","layout":"docs"},"DBCoreSchema":{"title":"DBCoreSchema","slug":"DBCore/DBCoreSchema","layout":"docs"},"DBCoreTable":{"title":"DBCoreTable","slug":"DBCore/DBCoreTable","layout":"docs"},"DBCoreTableSchema":{"title":"DBCoreTableSchema","slug":"DBCore/DBCoreTableSchema","layout":"docs"},"DBCoreTransaction":{"title":"DBCoreTransaction","slug":"DBCore/DBCoreTransaction","layout":"docs"},"DBCoreTransactionMode":{"title":"DBCoreTransactionMode","slug":"DBCore/DBCoreTransactionMode","layout":"docs"}},"Deprecations":{"title":"Deprecations","slug":"Deprecations","layout":"docs"},"DerivedWork":{"title":"Derived Work","slug":"DerivedWork","layout":"docs"},"Dexie":{"Dexie.[table]":{"title":"Dexie.[table]","slug":"Dexie/Dexie.[table]","layout":"docs"},"Dexie.addons":{"title":"Dexie.addons","slug":"Dexie/Dexie.addons","layout":"docs"},"Dexie.async()":{"title":"Dexie.async()","slug":"Dexie/Dexie.async()","layout":"docs"},"Dexie.backendDB()":{"title":"Dexie.backendDB()","slug":"Dexie/Dexie.backendDB()","layout":"docs"},"Dexie.close()":{"title":"Dexie.close()","slug":"Dexie/Dexie.close()","layout":"docs"},"Dexie.currentTransaction":{"title":"Dexie.currentTransaction","slug":"Dexie/Dexie.currentTransaction","layout":"docs"},"Dexie.debug":{"title":"Dexie.debug","slug":"Dexie/Dexie.debug","layout":"docs"},"Dexie.deepClone()":{"title":"Dexie.deepClone()","slug":"Dexie/Dexie.deepClone()","layout":"docs"},"Dexie.defineClass()":{"title":"Dexie.defineClass()","slug":"Dexie/Dexie.defineClass()","layout":"docs"},"Dexie.delByKeyPath()":{"title":"Dexie.delByKeyPath()","slug":"Dexie/Dexie.delByKeyPath()","layout":"docs"},"Dexie.delete()":{"title":"Dexie.delete()","slug":"Dexie/Dexie.delete()","layout":"docs"},"Dexie.derive()":{"title":"Dexie.derive()","slug":"Dexie/Dexie.derive()","layout":"docs"},"Dexie.events()":{"title":"Dexie.events()","slug":"Dexie/Dexie.events()","layout":"docs"},"Dexie.exists()":{"title":"Dexie.exists()","slug":"Dexie/Dexie.exists()","layout":"docs"},"Dexie.extend()":{"title":"Dexie.extend()","slug":"Dexie/Dexie.extend()","layout":"docs"},"Dexie.fakeAutoComplete()":{"title":"Dexie.fakeAutoComplete()","slug":"Dexie/Dexie.fakeAutoComplete()","layout":"docs"},"Dexie.getByKeyPath()":{"title":"Dexie.getByKeyPath()","slug":"Dexie/Dexie.getByKeyPath()","layout":"docs"},"Dexie.getDatabaseNames()":{"title":"Dexie.getDatabaseNames()","slug":"Dexie/Dexie.getDatabaseNames()","layout":"docs"},"Dexie.hasFailed()":{"title":"Dexie.hasFailed()","slug":"Dexie/Dexie.hasFailed()","layout":"docs"},"Dexie.ignoreTransaction()":{"title":"Dexie.ignoreTransaction()","slug":"Dexie/Dexie.ignoreTransaction()","layout":"docs"},"Dexie.isOpen()":{"title":"Dexie.isOpen()","slug":"Dexie/Dexie.isOpen()","layout":"docs"},"Dexie":{"title":"Dexie Constructor","slug":"Dexie/Dexie","layout":"docs"},"Dexie.name":{"title":"Dexie.name","slug":"Dexie/Dexie.name","layout":"docs"},"Dexie.on()":{"title":"Dexie.on()","slug":"Dexie/Dexie.on()","layout":"docs"},"Dexie.on.blocked":{"title":"Dexie.on.blocked","slug":"Dexie/Dexie.on.blocked","layout":"docs"},"Dexie.on.close":{"title":"Dexie.on.close","slug":"Dexie/Dexie.on.close","layout":"docs"},"Dexie.on.error":{"title":"Dexie.on.error","slug":"Dexie/Dexie.on.error","layout":"docs"},"Dexie.on.populate-(old-version)":{"title":"Dexie.on.populate-(old-version)","slug":"Dexie/Dexie.on.populate-(old-version)","layout":"docs"},"Dexie.on.populate":{"title":"Dexie.on.populate","slug":"Dexie/Dexie.on.populate","layout":"docs"},"Dexie.on.ready":{"title":"Dexie.on.ready","slug":"Dexie/Dexie.on.ready","layout":"docs"},"Dexie.on.storagemutated":{"title":"Dexie.on.storagemutated","slug":"Dexie/Dexie.on.storagemutated","layout":"docs"},"Dexie.on.versionchange":{"title":"Dexie.on.versionchange","slug":"Dexie/Dexie.on.versionchange","layout":"docs"},"Dexie.open()":{"title":"Dexie.open()","slug":"Dexie/Dexie.open()","layout":"docs"},"Dexie.override()":{"title":"Dexie.override()","slug":"Dexie/Dexie.override()","layout":"docs"},"Dexie.semVer":{"title":"Dexie.semVer","slug":"Dexie/Dexie.semVer","layout":"docs"},"Dexie.setByKeyPath()":{"title":"Dexie.setByKeyPath()","slug":"Dexie/Dexie.setByKeyPath()","layout":"docs"},"Dexie.shallowClone()":{"title":"Dexie.shallowClone()","slug":"Dexie/Dexie.shallowClone()","layout":"docs"},"Dexie.spawn()":{"title":"Dexie.spawn()","slug":"Dexie/Dexie.spawn()","layout":"docs"},"Dexie.table()":{"title":"Dexie.table()","slug":"Dexie/Dexie.table()","layout":"docs"},"Dexie.tables":{"title":"Dexie.tables","slug":"Dexie/Dexie.tables","layout":"docs"},"Dexie.transaction()-(old-version)":{"title":"Dexie.transaction()-(old-version)","slug":"Dexie/Dexie.transaction()-(old-version)","layout":"docs"},"Dexie.transaction()":{"title":"Dexie.transaction()","slug":"Dexie/Dexie.transaction()","layout":"docs"},"Dexie.use()":{"title":"Dexie.use()","slug":"Dexie/Dexie.use()","layout":"docs"},"Dexie.verno":{"title":"Dexie.verno","slug":"Dexie/Dexie.verno","layout":"docs"},"Dexie.version()":{"title":"Dexie.version()","slug":"Dexie/Dexie.version()","layout":"docs"},"Dexie.version":{"title":"Dexie.version","slug":"Dexie/Dexie.version","layout":"docs"},"Dexie.vip()":{"title":"Dexie.vip()","slug":"Dexie/Dexie.vip()","layout":"docs"},"Dexie.waitFor()":{"title":"Dexie.waitFor()","slug":"Dexie/Dexie.waitFor()","layout":"docs"}},"Dexie.js":{"title":"Dexie.js","slug":"Dexie.js","layout":"docs"},"DexieErrors":{"Dexie.AbortError":{"title":"Dexie.AbortError","slug":"DexieErrors/Dexie.AbortError","layout":"docs"},"Dexie.BulkError":{"title":"Dexie.BulkError","slug":"DexieErrors/Dexie.BulkError","layout":"docs"},"Dexie.ConstraintError":{"title":"Dexie.ConstraintError","slug":"DexieErrors/Dexie.ConstraintError","layout":"docs"},"Dexie.DataCloneError":{"title":"Dexie.DataCloneError","slug":"DexieErrors/Dexie.DataCloneError","layout":"docs"},"Dexie.DataError":{"title":"Dexie.DataError","slug":"DexieErrors/Dexie.DataError","layout":"docs"},"Dexie.DatabaseClosedError":{"title":"Dexie.DatabaseClosedError","slug":"DexieErrors/Dexie.DatabaseClosedError","layout":"docs"},"Dexie.IncompatiblePromiseError":{"title":"Dexie.IncompatiblePromiseError","slug":"DexieErrors/Dexie.IncompatiblePromiseError","layout":"docs"},"Dexie.InternalError":{"title":"Dexie.InternalError","slug":"DexieErrors/Dexie.InternalError","layout":"docs"},"Dexie.InvalidAccessError":{"title":"Dexie.InvalidAccessError","slug":"DexieErrors/Dexie.InvalidAccessError","layout":"docs"},"Dexie.InvalidArgumentError":{"title":"Dexie.InvalidArgumentError","slug":"DexieErrors/Dexie.InvalidArgumentError","layout":"docs"},"Dexie.InvalidStateError":{"title":"Dexie.InvalidStateError","slug":"DexieErrors/Dexie.InvalidStateError","layout":"docs"},"Dexie.InvalidTableError":{"title":"Dexie.InvalidTableError","slug":"DexieErrors/Dexie.InvalidTableError","layout":"docs"},"Dexie.MissingAPIError":{"title":"Dexie.MissingAPIError","slug":"DexieErrors/Dexie.MissingAPIError","layout":"docs"},"Dexie.ModifyError":{"title":"Dexie.ModifyError","slug":"DexieErrors/Dexie.ModifyError","layout":"docs"},"Dexie.NoSuchDatabaseError":{"title":"Dexie.NoSuchDatabaseErrorError","slug":"DexieErrors/Dexie.NoSuchDatabaseError","layout":"docs"},"Dexie.NotFoundError":{"title":"Dexie.NotFoundError","slug":"DexieErrors/Dexie.NotFoundError","layout":"docs"},"Dexie.OpenFailedError":{"title":"Dexie.OpenFailedError","slug":"DexieErrors/Dexie.OpenFailedError","layout":"docs"},"Dexie.PrematureCommitError":{"title":"Dexie.PrematureCommitError","slug":"DexieErrors/Dexie.PrematureCommitError","layout":"docs"},"Dexie.QuotaExceededError":{"title":"Dexie.QuotaExceededError","slug":"DexieErrors/Dexie.QuotaExceededError","layout":"docs"},"Dexie.ReadOnlyError":{"title":"Dexie.ReadOnlyError","slug":"DexieErrors/Dexie.ReadOnlyError","layout":"docs"},"Dexie.SchemaError":{"title":"Dexie.SchemaError","slug":"DexieErrors/Dexie.SchemaError","layout":"docs"},"Dexie.SubTransactionError":{"title":"Dexie.SubTransactionError","slug":"DexieErrors/Dexie.SubTransactionError","layout":"docs"},"Dexie.TimeoutError":{"title":"Dexie.TimeoutError","slug":"DexieErrors/Dexie.TimeoutError","layout":"docs"},"Dexie.TransactionInactiveError":{"title":"Dexie.TransactionInactiveError","slug":"DexieErrors/Dexie.TransactionInactiveError","layout":"docs"},"Dexie.UnknownError":{"title":"Dexie.UnknownError","slug":"DexieErrors/Dexie.UnknownError","layout":"docs"},"Dexie.UnsupportedError":{"title":"Dexie.UnsupportedError","slug":"DexieErrors/Dexie.UnsupportedError","layout":"docs"},"Dexie.UpgradeError":{"title":"Dexie.UpgradeError()","slug":"DexieErrors/Dexie.UpgradeError","layout":"docs"},"Dexie.VersionChangeError":{"title":"Dexie.VersionChangeError","slug":"DexieErrors/Dexie.VersionChangeError","layout":"docs"},"Dexie.VersionError":{"title":"Dexie.VersionError","slug":"DexieErrors/Dexie.VersionError","layout":"docs"},"DexieError":{"title":"DexieError","slug":"DexieErrors/DexieError","layout":"docs"}},"Download":{"title":"Download","slug":"Download","layout":"docs"},"EntityTable":{"title":"EntityTable","slug":"EntityTable","layout":"docs"},"ExportImport":{"dexie-export-import":{"title":"Export and Import Database","slug":"ExportImport/dexie-export-import","layout":"docs"}},"IndexSpec":{"title":"IndexSpec","slug":"IndexSpec","layout":"docs"},"Indexable-Type":{"title":"Indexable Type","slug":"Indexable-Type","layout":"docs"},"IndexedDB-on-Safari":{"title":"IndexedDB on Safari","slug":"IndexedDB-on-Safari","layout":"docs"},"MultiEntry-Index":{"title":"MultiEntry Index","slug":"MultiEntry-Index","layout":"docs"},"Observable":{"Dexie.Observable.DatabaseChange":{"title":"Dexie.Observable.DatabaseChange","slug":"Observable/Dexie.Observable.DatabaseChange","layout":"docs"},"Dexie.Observable":{"title":"Dexie.Observable","slug":"Observable/Dexie.Observable","layout":"docs"}},"Promise":{"Promise.PSD":{"title":"Promise.PSD","slug":"Promise/Promise.PSD","layout":"docs"},"Promise.catch()":{"title":"Promise.catch()","slug":"Promise/Promise.catch()","layout":"docs"},"Promise.finally()":{"title":"Promise.finally()","slug":"Promise/Promise.finally()","layout":"docs"},"Promise":{"title":"Promise","slug":"Promise/Promise","layout":"docs"},"Promise.on.error":{"title":"Promise.on.error","slug":"Promise/Promise.on.error","layout":"docs"},"Promise.onuncatched":{"title":"Promise.onuncatched","slug":"Promise/Promise.onuncatched","layout":"docs"},"unhandledrejection-event":{"title":"unhandledrejection-event","slug":"Promise/unhandledrejection-event","layout":"docs"}},"PropModification":{"add()":{"title":"Consistent add() operator","slug":"PropModification/add()","layout":"docs"},"remove()":{"title":"Consistent remove() operator","slug":"PropModification/remove()","layout":"docs"},"replacePrefix()":{"title":"Consistent replacePrefix() operator","slug":"PropModification/replacePrefix()","layout":"docs"}},"Questions-and-Answers":{"title":"Questions and Answers","slug":"Questions-and-Answers","layout":"docs"},"Releasing-Dexie":{"title":"Releasing Dexie","slug":"Releasing-Dexie","layout":"docs"},"Samples":{"title":"Samples","slug":"Samples","layout":"docs-freestyle"},"Simplify-with-yield":{"title":"Simplify with yield","slug":"Simplify-with-yield","layout":"docs"},"StorageManager":{"title":"How To Use the StorageManager API","slug":"StorageManager","layout":"docs"},"Syncable":{"Dexie.Syncable.IDatabaseChange":{"title":"Dexie.Syncable.IDatabaseChange","slug":"Syncable/Dexie.Syncable.IDatabaseChange","layout":"docs"},"Dexie.Syncable.IPersistedContext":{"title":"Dexie.Syncable.IPersistentContext","slug":"Syncable/Dexie.Syncable.IPersistedContext","layout":"docs"},"Dexie.Syncable.ISyncProtocol":{"title":"Dexie.Syncable.ISyncProtocol","slug":"Syncable/Dexie.Syncable.ISyncProtocol","layout":"docs"},"Dexie.Syncable.StatusTexts":{"title":"Dexie.Syncable.StatusTexts","slug":"Syncable/Dexie.Syncable.StatusTexts","layout":"docs"},"Dexie.Syncable.Statuses":{"title":"Dexie.Syncable.Statuses","slug":"Syncable/Dexie.Syncable.Statuses","layout":"docs"},"Dexie.Syncable.js":{"title":"Dexie.Syncable","slug":"Syncable/Dexie.Syncable.js","layout":"docs"},"Dexie.Syncable.registerSyncProtocol()":{"title":"Dexie.Syncable.registerSyncProtocol()","slug":"Syncable/Dexie.Syncable.registerSyncProtocol()","layout":"docs"},"db.syncable.connect()":{"title":"db.syncable.connect()","slug":"Syncable/db.syncable.connect()","layout":"docs"},"db.syncable.delete()":{"title":"db.syncable.delete()","slug":"Syncable/db.syncable.delete()","layout":"docs"},"db.syncable.disconnect()":{"title":"db.syncable.disconnect()","slug":"Syncable/db.syncable.disconnect()","layout":"docs"},"db.syncable.getOptions()":{"title":"db.syncable.getOptions()","slug":"Syncable/db.syncable.getOptions()","layout":"docs"},"db.syncable.getStatus()":{"title":"db.syncable.getStatus()","slug":"Syncable/db.syncable.getStatus()","layout":"docs"},"db.syncable.list()":{"title":"db.syncable.list()","slug":"Syncable/db.syncable.list()","layout":"docs"},"db.syncable.on('statusChanged')":{"title":"db.syncable.on('statusChanged')","slug":"Syncable/db.syncable.on('statusChanged')","layout":"docs"},"db.syncable.setFilter()":{"title":"db.syncable.setFilter()","slug":"Syncable/db.syncable.setFilter()","layout":"docs"}},"Table":{"Table.add()":{"title":"Table.add()","slug":"Table/Table.add()","layout":"docs"},"Table.bulkAdd()":{"title":"Table.bulkAdd()","slug":"Table/Table.bulkAdd()","layout":"docs"},"Table.bulkDelete()":{"title":"Table.bulkDelete()","slug":"Table/Table.bulkDelete()","layout":"docs"},"Table.bulkGet()":{"title":"Table.bulkGet()","slug":"Table/Table.bulkGet()","layout":"docs"},"Table.bulkPut()":{"title":"Table.bulkPut()","slug":"Table/Table.bulkPut()","layout":"docs"},"Table.bulkUpdate()":{"title":"Table.bulkUpdate()","slug":"Table/Table.bulkUpdate()","layout":"docs"},"Table.clear()":{"title":"Table.clear()","slug":"Table/Table.clear()","layout":"docs"},"Table.count()":{"title":"Table.count()","slug":"Table/Table.count()","layout":"docs"},"Table.defineClass()":{"title":"Table.defineClass()","slug":"Table/Table.defineClass()","layout":"docs"},"Table.delete()":{"title":"Table.delete()","slug":"Table/Table.delete()","layout":"docs"},"Table.each()":{"title":"Table.each()","slug":"Table/Table.each()","layout":"docs"},"Table.filter()":{"title":"Table.filter()","slug":"Table/Table.filter()","layout":"docs"},"Table.get()":{"title":"Table.get()","slug":"Table/Table.get()","layout":"docs"},"Table.hook('creating')":{"title":"Table.hook('creating')","slug":"Table/Table.hook('creating')","layout":"docs"},"Table.hook('deleting')":{"title":"Table.hook('deleting')","slug":"Table/Table.hook('deleting')","layout":"docs"},"Table.hook('reading')":{"title":"Table.hook('reading')","slug":"Table/Table.hook('reading')","layout":"docs"},"Table.hook('updating')":{"title":"Table.hook('updating')","slug":"Table/Table.hook('updating')","layout":"docs"},"Table.limit()":{"title":"Table.limit()","slug":"Table/Table.limit()","layout":"docs"},"Table.mapToClass()":{"title":"Table.mapToClass()","slug":"Table/Table.mapToClass()","layout":"docs"},"Table":{"title":"Table","slug":"Table/Table","layout":"docs"},"Table.name":{"title":"Table.name","slug":"Table/Table.name","layout":"docs"},"Table.offset()":{"title":"Table.offset()","slug":"Table/Table.offset()","layout":"docs"},"Table.orderBy()":{"title":"Table.orderBy()","slug":"Table/Table.orderBy()","layout":"docs"},"Table.put()":{"title":"Table.put()","slug":"Table/Table.put()","layout":"docs"},"Table.reverse()":{"title":"Table.reverse()","slug":"Table/Table.reverse()","layout":"docs"},"Table.schema":{"title":"Table.schema","slug":"Table/Table.schema","layout":"docs"},"Table.toArray()":{"title":"Table.toArray()","slug":"Table/Table.toArray()","layout":"docs"},"Table.toCollection()":{"title":"Table.toCollection()","slug":"Table/Table.toCollection()","layout":"docs"},"Table.update()":{"title":"Table.update()","slug":"Table/Table.update()","layout":"docs"},"Table.upsert()":{"title":"Table.upsert()","slug":"Table/Table.upsert()","layout":"docs"},"Table.where()":{"title":"Table.where()","slug":"Table/Table.where()","layout":"docs"}},"TableSchema":{"title":"Table Schema","slug":"TableSchema","layout":"docs"},"The-Main-Limitations-of-IndexedDB":{"title":"The main limitations of IndexedDB","slug":"The-Main-Limitations-of-IndexedDB","layout":"docs"},"The-Three-Main-Limitations-of-IndexedDB":{"title":"The three main limitations of IndexedDB","slug":"The-Three-Main-Limitations-of-IndexedDB","layout":"redirect"},"Transaction":{"Transaction.abort()":{"title":"Transaction.abort()","slug":"Transaction/Transaction.abort()","layout":"docs"},"Transaction":{"title":"Transaction","slug":"Transaction/Transaction","layout":"docs"},"Transaction.on.abort":{"title":"Transaction.on.abort","slug":"Transaction/Transaction.on.abort","layout":"docs"},"Transaction.on.complete":{"title":"Transaction.on.complete","slug":"Transaction/Transaction.on.complete","layout":"docs"},"Transaction.on.error":{"title":"Transaction.on.error","slug":"Transaction/Transaction.on.error","layout":"docs"},"Transaction.table()":{"title":"Transaction.table()","slug":"Transaction/Transaction.table()","layout":"docs"}},"Tutorial":{"Angular":{"title":"Get started with Dexie in Angular","slug":"Tutorial/Angular","layout":"docs"},"Best-Practices":{"title":"Best Practices","slug":"Tutorial/Best-Practices","layout":"docs"},"Building-Addons":{"title":"Building Addons","slug":"Tutorial/Building-Addons","layout":"docs"},"Consuming-dexie-as-a-module":{"title":"Consuming Dexie as a module","slug":"Tutorial/Consuming-dexie-as-a-module","layout":"docs"},"Design":{"title":"Design","slug":"Tutorial/Design","layout":"docs"},"Dexie-Cloud":{"title":"Get started with Dexie Cloud","slug":"Tutorial/Dexie-Cloud","layout":"docs-dexie-cloud"},"Getting-started":{"title":"Getting Started with Dexie.js","slug":"Tutorial/Getting-started","layout":"docs-freestyle"},"Hello-World":{"title":"Hello World","slug":"Tutorial/Hello-World","layout":"docs"},"Migrating-existing-DB-to-Dexie":{"title":"Migrating existing DB to Dexie","slug":"Tutorial/Migrating-existing-DB-to-Dexie","layout":"docs"},"React":{"title":"Get started with Dexie in React","slug":"Tutorial/React","layout":"docs"},"Svelte":{"title":"Get started with Dexie in Svelte","slug":"Tutorial/Svelte","layout":"docs"},"Understanding-the-basics":{"title":"Understanding the basics","slug":"Tutorial/Understanding-the-basics","layout":"docs"},"Vue":{"title":"Get started with Dexie in Vue","slug":"Tutorial/Vue","layout":"docs"},"index":{"title":"Tutorial","slug":"Tutorial/index","layout":"docs"}},"Typescript-old":{"title":"Typescript (old)","slug":"Typescript-old","layout":"docs"},"Typescript":{"title":"Typescript","slug":"Typescript","layout":"docs"},"Version":{"Version":{"title":"Version","slug":"Version/Version","layout":"docs"},"Version.stores()":{"title":"Version.stores()","slug":"Version/Version.stores()","layout":"docs"},"Version.upgrade()":{"title":"Version.upgrade()","slug":"Version/Version.upgrade()","layout":"docs"}},"WhereClause":{"WhereClause.above()":{"title":"WhereClause.above()","slug":"WhereClause/WhereClause.above()","layout":"docs"},"WhereClause.aboveOrEqual()":{"title":"WhereClause.aboveOrEqual()","slug":"WhereClause/WhereClause.aboveOrEqual()","layout":"docs"},"WhereClause.anyOf()":{"title":"WhereClause.anyOf()","slug":"WhereClause/WhereClause.anyOf()","layout":"docs"},"WhereClause.anyOfIgnoreCase()":{"title":"WhereClause.anyOfIgnoreCase()","slug":"WhereClause/WhereClause.anyOfIgnoreCase()","layout":"docs"},"WhereClause.below()":{"title":"WhereClause.below()","slug":"WhereClause/WhereClause.below()","layout":"docs"},"WhereClause.belowOrEqual()":{"title":"WhereClause.belowOrEqual()","slug":"WhereClause/WhereClause.belowOrEqual()","layout":"docs"},"WhereClause.between()":{"title":"WhereClause.between()","slug":"WhereClause/WhereClause.between()","layout":"docs"},"WhereClause.equals()":{"title":"WhereClause.equals()","slug":"WhereClause/WhereClause.equals()","layout":"docs"},"WhereClause.equalsIgnoreCase()":{"title":"WhereClause.equalsIgnoreCase()","slug":"WhereClause/WhereClause.equalsIgnoreCase()","layout":"docs"},"WhereClause.inAnyRange()":{"title":"WhereClause.inAnyRange()","slug":"WhereClause/WhereClause.inAnyRange()","layout":"docs"},"WhereClause":{"title":"WhereClause","slug":"WhereClause/WhereClause","layout":"docs"},"WhereClause.noneOf()":{"title":"WhereClause.noneOf()","slug":"WhereClause/WhereClause.noneOf()","layout":"docs"},"WhereClause.notEqual()":{"title":"WhereClause.notEqual()","slug":"WhereClause/WhereClause.notEqual()","layout":"docs"},"WhereClause.startsWith()":{"title":"WhereClause.startsWith()","slug":"WhereClause/WhereClause.startsWith()","layout":"docs"},"WhereClause.startsWithAnyOf()":{"title":"WhereClause.startsWithAnyOf()","slug":"WhereClause/WhereClause.startsWithAnyOf()","layout":"docs"},"WhereClause.startsWithAnyOfIgnoreCase()":{"title":"WhereClause.startsWithAnyOfIgnoreCase()","slug":"WhereClause/WhereClause.startsWithAnyOfIgnoreCase()","layout":"docs"},"WhereClause.startsWithIgnoreCase()":{"title":"WhereClause.startsWithIgnoreCase()","slug":"WhereClause/WhereClause.startsWithIgnoreCase()","layout":"docs"}},"Y.js":{"Y.js":{"title":"Y.js","slug":"Y.js/Y.js","layout":"docs"},"y-dexie":{"title":"y-dexie","slug":"Y.js/y-dexie","layout":"docs"}},"dexie-react-hooks":{"useDocument()":{"title":"useDocument()","slug":"dexie-react-hooks/useDocument()","layout":"docs"},"useLiveQuery()":{"title":"useLiveQuery()","slug":"dexie-react-hooks/useLiveQuery()","layout":"docs"},"useObservable()":{"title":"useObservable()","slug":"dexie-react-hooks/useObservable()","layout":"docs"},"usePermissions()":{"title":"usePermissions()","slug":"dexie-react-hooks/usePermissions()","layout":"docs"}},"dexie-worker":{"dexie-worker":{"title":"dexie-worker","slug":"dexie-worker/dexie-worker","layout":"docs"}},"inbound":{"title":"Inbound","slug":"inbound","layout":"docs"},"index":{"title":"Docs Home","slug":"index","layout":"docs"},"libs":{"dexie-react-hooks":{"title":"dexie-react-hooks","slug":"libs/dexie-react-hooks","layout":"docs"}},"liveQuery()":{"title":"liveQuery()","slug":"liveQuery()","layout":"docs"},"safari-issues":{"title":"safari-issues","slug":"safari-issues","layout":"$undefined"}},"currentSlug":"Cloud/consistency","pageTitle":"Consistency in Dexie Cloud","children":"$L1f"}]
20:I[19646,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js","/_next/static/chunks/b544468eebbd739a.js","/_next/static/chunks/b3354f279df46dba.js"],"default"]
21:I[26863,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js","/_next/static/chunks/b544468eebbd739a.js","/_next/static/chunks/b3354f279df46dba.js"],"default"]
22:I[72729,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js","/_next/static/chunks/b544468eebbd739a.js","/_next/static/chunks/b3354f279df46dba.js"],"default"]
23:I[32412,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js","/_next/static/chunks/b544468eebbd739a.js","/_next/static/chunks/b3354f279df46dba.js"],"default"]
24:I[65801,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js","/_next/static/chunks/b544468eebbd739a.js","/_next/static/chunks/b3354f279df46dba.js"],"default"]
1f:["$","$L20",null,{"component":"article","children":[["$","$L20",null,{"component":"header","sx":{"mb":5},"children":["$","$L21",null,{"variant":"h1","component":"h1","sx":{"mb":3},"children":"Consistency in Dexie Cloud"}]}],["$","$L20",null,{"className":"docs-content","children":["$","$L20",null,{"className":"mdx-content","sx":{"maxWidth":"none"},"children":[["$","$L21","mdx-1",{"variant":"body1","component":"div","paragraph":true,"children":"This page describes the concepts that Dexie Cloud use in order to guarantee consistency in the synchronized offline-first database. Offline clients may share the same subset of data - and perform operations that may yield one direct result on the offline database, but would have yielded another result after a sync where updated data from another client would make the original operation yield another result. Consistent add-, modify-, put- and delete operations are core concepts of Dexie Cloud and makes sure to not just sync individual objects but also the conditions used in the operations, so that the same operations can be re-executed on updated data to guarantee the same consistency at all times."}],"\n",["$","$L21","mdx-3",{"variant":"body1","component":"div","paragraph":true,"children":["If you are new to Dexie Cloud, please visit the ",["$","$L22","mdx-2",{"href":"/cloud/","color":"primary","sx":{"fontWeight":600},"underline":"hover","children":"Dexie Cloud landing page"}],"."]}],"\n",["$","$L21","mdx-4",{"variant":"body1","component":"div","paragraph":true,"children":"If you prefer to jump right in to samples, here some shortcuts:"}],"\n",["$","$L23","mdx-13",{"sx":{"mb":3,"listStyleType":"disc","pl":3,"& .MuiListItem-root":{"display":"list-item","pl":0}},"children":["\n",["$","$L24","mdx-6",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":["$","$L22","mdx-5",{"href":"https://github.com/dexie/Dexie.js/blob/v4.0.0-alpha.3/samples/dexie-cloud-todo-app/src/db/TodoList.ts#L144-L149","color":"primary","sx":{"fontWeight":600},"underline":"hover","target":"_blank","rel":"noopener noreferrer","children":"Consistently delete own access to a todo-list"}]}],"\n",["$","$L24","mdx-8",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":["$","$L22","mdx-7",{"href":"https://github.com/dexie/Dexie.js/blob/v4.0.0-alpha.3/samples/dexie-cloud-todo-app/src/db/TodoList.ts#L151-L172","color":"primary","sx":{"fontWeight":600},"underline":"hover","target":"_blank","rel":"noopener noreferrer","children":"Consistently delete a shared todo-list along with its todo items"}]}],"\n",["$","$L24","mdx-10",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":["$","$L22","mdx-9",{"href":"https://github.com/dexie/Dexie.js/blob/v4.0.0-alpha.3/samples/dexie-cloud-todo-app/src/db/TodoList.ts#L30-L32","color":"primary","sx":{"fontWeight":600},"underline":"hover","target":"_blank","rel":"noopener noreferrer","children":"Consistently detect whether a todo-list is shared or not"}]}],"\n",["$","$L24","mdx-12",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":["$","$L22","mdx-11",{"href":"https://github.com/dexie/Dexie.js/blob/v4.0.0-alpha.3/samples/dexie-cloud-todo-app/src/db/TodoList.ts#L38-L72","color":"primary","sx":{"fontWeight":600},"underline":"hover","target":"_blank","rel":"noopener noreferrer","children":"Consistently make a todo-list sharable and create a realm for its sharing"}]}],"\n"]}],"\n",["$","$L21","mdx-14",{"variant":"h1","component":"h1","gutterBottom":true,"children":"Introduction"}],"\n",["$","$L21","mdx-15",{"variant":"body1","component":"div","paragraph":true,"children":"It can be a challenge to keep consistency in synced offline-first applications. You are working with data that is being copied across multiple devices - some of which might be offline while you perform an operation. Or you might be offline while you perform an operation that needs to be performed in a way that keeps the data 100% consistent at any point in time - and will be kept consistent after next sync - no matter what operations that have taken place by other users."}],"\n",["$","$L21","mdx-16",{"variant":"body1","component":"div","paragraph":true,"children":"Dexie Cloud uses a combination of concepts that the application programmer can utilize in order to keep the data totally consistent at all times."}],"\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37","\n","$L38","\n","$L39","\n","$L3a","\n","$L3b","\n","$L3c","\n","$L3d","\n","$L3e","\n","$L3f","\n","$L40","\n","$L41","\n","$L42","\n","$L43","\n","$L44","\n","$L45","\n","$L46","\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c","\n","$L4d","\n","$L4e","\n","$L4f","\n","$L50","\n","$L51","\n","$L52","\n","$L53","\n","$L54","\n","$L55","\n","$L56","\n","$L57","\n","$L58","\n","$L59","\n","$L5a","\n","$L5b","\n","$L5c","\n","$L5d","\n","$L5e","\n","$L5f","\n","$L60","\n","$L61","\n","$L62","\n","$L63","\n","$L64","\n","$L65","\n","$L66","\n","$L67","\n","$L68","\n","$L69","\n","$L6a","\n"]}]}],"$L6b"]}]
6c:I[63876,["/_next/static/chunks/f6023188028df157.js","/_next/static/chunks/ff5f09f4edae29eb.js","/_next/static/chunks/68e80996639386d6.js","/_next/static/chunks/616d70b9d5b07f10.js","/_next/static/chunks/f7ca7d40a7605a95.js","/_next/static/chunks/b544468eebbd739a.js","/_next/static/chunks/b3354f279df46dba.js"],"default"]
25:["$","$L21","mdx-17",{"variant":"h1","component":"h1","gutterBottom":true,"children":"Designing a Consistency-friendly model"}]
26:["$","$L21","mdx-19",{"variant":"body1","component":"div","paragraph":true,"children":["If you work with Dexie Cloud, it is important to avoid storing objects in array properties if the array needs to be manipulated frequently by multiple clients. It is much better to use a relational model and let every type map to a table, and let collections belonging to an entity be represented in as its own database object, with its own ID and with a reference-property acting as a foreign key to the owning object (a traditional one-to-many relationship in relational databases). Many-to-many relations are best represented using an ",["$","$L22","mdx-18",{"href":"https://en.wikipedia.org/wiki/Associative_entity","color":"primary","sx":{"fontWeight":600},"underline":"hover","target":"_blank","rel":"noopener noreferrer","children":"associative entity"}]," for the same reason. By using a relational approach, these collections may be managed in a consistent manner also by offline clients and conflicts can be avoided using consistent modify- and delete operations as described later on this page."]}]
27:["$","$L21","mdx-20",{"variant":"h1","component":"h1","gutterBottom":true,"children":"Consistency Concepts in Dexie Cloud"}]
28:["$","$L21","mdx-21",{"variant":"body1","component":"div","paragraph":true,"children":"The concepts being used in Dexie Cloud to keep data consistent, are:"}]
29:["$","$L23","mdx-32",{"sx":{"mb":3,"listStyleType":"disc","pl":3,"& .MuiListItem-root":{"display":"list-item","pl":0}},"children":["\n",["$","$L24","mdx-22",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Globally Unique IDs"}],"\n",["$","$L24","mdx-23",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Atomic Transactions"}],"\n",["$","$L24","mdx-24",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Canonical Server Data Snapshot"}],"\n",["$","$L24","mdx-25",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Consistent Modify- and Delete Operations"}],"\n",["$","$L24","mdx-26",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Consistently add or remove unique entries to sets of strings or numbers"}],"\n",["$","$L24","mdx-27",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Consistent addition / subtraction"}],"\n",["$","$L24","mdx-28",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Consistent hierarchial tree structures"}],"\n",["$","$L24","mdx-29",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Tied Realms"}],"\n",["$","$L24","mdx-30",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Update Operations"}],"\n",["$","$L24","mdx-31",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Private Singleton IDs"}],"\n"]}]
2a:["$","$L21","mdx-33",{"variant":"h2","component":"h2","gutterBottom":true,"sx":{"mt":4},"children":"Globally Unique IDs"}]
2b:["$","$L21","mdx-34",{"variant":"body1","component":"div","paragraph":true,"children":"In contrast to auto-incremented numbers or short strings, globally unique IDs have the constraint that it virtually impossible to that two generated IDs are equal. That constraint make them avoid any conflict for add (insert) operations that occurs on different offline clients."}]
6d:T683,<span class="token constant">CLIENT</span> <span class="token constant">A</span> adds object <span class="token keyword">with</span> <span class="token constant">ID</span> <span class="token string">"AaIHn9smowhaFixqlcb7C4u"</span>
<span class="token constant">CLIENT</span> <span class="token constant">B</span> adds object <span class="token keyword">with</span> <span class="token constant">ID</span> <span class="token string">"BbIXypXaau8MefAQPb77ivL"</span>
<span class="token constant">CLIENT</span> <span class="token constant">A</span> syncs <span class="token keyword">with</span> server <span class="token operator">--</span><span class="token operator">></span> <span class="token string">"AaIHn9smowhaFixqlcb7C4u"</span> is inserted on server
<span class="token constant">CLIENT</span> <span class="token constant">B</span> syncs <span class="token keyword">with</span> server <span class="token operator">--</span><span class="token operator">></span> <span class="token string">"BbIXypXaau8MefAQPb77ivL"</span> is inserted on server<span class="token punctuation">.</span> <span class="token string">"AaIHn9smowhaFixqlcb7C4u"</span> is retrieved back to <span class="token constant">CLIENT</span> <span class="token constant">B</span><span class="token punctuation">.</span>
<span class="token constant">CLIENT</span> <span class="token constant">A</span> pulls from server <span class="token operator">--</span><span class="token operator">></span> <span class="token string">"BbIXypXaau8MefAQPb77ivL"</span> is retrieved back to <span class="token constant">CLIENT</span> <span class="token constant">A</span><span class="token punctuation">.</span>
2c:["$","$1","28",{"children":["$","$L20","mdx-35",{"sx":{"mb":3,"background":"rgba(255, 255, 255, 0.05)","borderRadius":2,"border":"1px solid rgba(255, 255, 255, 0.1)","p":3,"mt":2,"overflow":"auto"},"children":["$","div",null,{"className":"codeblock-container","style":{"position":"relative"},"children":[["$","$L6c",null,{"code":"CLIENT A adds object with ID \"AaIHn9smowhaFixqlcb7C4u\"\nCLIENT B adds object with ID \"BbIXypXaau8MefAQPb77ivL\"\nCLIENT A syncs with server --> \"AaIHn9smowhaFixqlcb7C4u\" is inserted on server\nCLIENT B syncs with server --> \"BbIXypXaau8MefAQPb77ivL\" is inserted on server. \"AaIHn9smowhaFixqlcb7C4u\" is retrieved back to CLIENT B.\nCLIENT A pulls from server --> \"BbIXypXaau8MefAQPb77ivL\" is retrieved back to CLIENT A.\n"}],["$","pre",null,{"className":"prism-javascript","children":["$","code",null,{"className":"prism-javascript code-highlight","dangerouslySetInnerHTML":{"__html":"$6d"}}]}]]}]}]}]
2d:["$","$L21","mdx-38",{"variant":"body1","component":"div","paragraph":true,"children":["Note however, that ",["$","$L22","mdx-36",{"href":"https://en.wikipedia.org/wiki/Associative_entity","color":"primary","sx":{"fontWeight":600},"underline":"hover","target":"_blank","rel":"noopener noreferrer","children":"associative entities"}]," shall not have their own global ID but instead build up its primary key using the combination of the keys it refer to, using a ",["$","$L22","mdx-37",{"href":"/docs/Compound-Index#compound-primary-key","color":"primary","sx":{"fontWeight":600},"underline":"hover","children":"compound primary key"}],"."]}]
2e:["$","$L21","mdx-39",{"variant":"h2","component":"h2","gutterBottom":true,"sx":{"mt":4},"children":"Atomic Transactions"}]
2f:["$","$L21","mdx-40",{"variant":"body1","component":"div","paragraph":true,"children":"Any Dexie transaction will be regarded as an atomic all-or-nothing operation when it syncs to the cloud. If any of the involving operations fail to execute on the server for authorization reasons or any other reason, to other operations of the transaction be applied either and the server will send back a list of resulting operations that will make the client roll-back the operation."}]
30:["$","$L21","mdx-41",{"variant":"h2","component":"h2","gutterBottom":true,"sx":{"mt":4},"children":"Canonical Server Data Snapshot"}]
31:["$","$L21","mdx-42",{"variant":"body1","component":"div","paragraph":true,"children":"The protocol used when syncing between Dexie Cloud client and server assures that in the end of the sync, the client will have an identical snapshot of the data on the server (but just a subset of the database according to user's realm memberships). The algorithm for this can be described as so:"}]
32:["$","$L23","mdx-47",{"component":"ol","sx":{"mb":3,"pl":4,"listStyleType":"decimal","& .MuiListItem-root":{"display":"list-item","pl":1}},"children":["\n",["$","$L24","mdx-43",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Client sends all mutated objects along with their primary keys. Client also provides a revision pointing out the server data snapshot from the last sync. The logical outcome of this, is that all non-provided keys are for sure unchanged."}],"\n",["$","$L24","mdx-44",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Operations are executed on the server data"}],"\n",["$","$L24","mdx-45",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"When done, server should virtually send back the entire data snapshot to assure the canonical server data snapshot at this point. However, since we know what keys the client has changed, and what keys the server has changed, we know that these objects and only these objects needs to be sent back to the client in order to fulfill this promise."}],"\n",["$","$L24","mdx-46",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Before sending back all objects that have been changed by the server or client, the server will first further compute which parts of the objects (properties) that will actually have to be sent back - ignoring all properties that would be the same value anyway."}],"\n"]}]
33:["$","$L21","mdx-48",{"variant":"h2","component":"h2","gutterBottom":true,"sx":{"mt":4},"children":"Consistent Modify- and Delete Operations"}]
34:["$","$L21","mdx-49",{"variant":"body1","component":"div","paragraph":true,"children":"Dexie Cloud can guarantee consistency within a graph of related entities so that two offline clients manipulating it in various ways end up in a consistent state that comply with the where-clause of the modify or delete operation."}]
35:["$","$L21","mdx-52",{"variant":"body1","component":"div","paragraph":true,"children":["If ",["$","$L22","mdx-50",{"href":"/docs/Collection/Collection.modify()","color":"primary","sx":{"fontWeight":600},"underline":"hover","children":"Collection.modify()"}]," or ",["$","$L22","mdx-51",{"href":"/docs/Collection/Collection.delete()","color":"primary","sx":{"fontWeight":600},"underline":"hover","children":"Collection.delete()"}]," is used on a collection filtered by a certain where-expression, the expression will be a part of the operation and be re-executed on the server snapshot to ensure consistency of the intension of the operation."]}]
36:["$","$L21","mdx-54",{"variant":"body1","component":"div","paragraph":true,"children":["For example, let's say you want to modify all ToDo-items within a certain Todo-list to ",["$","$L20","mdx-53",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"{done: true}"}],":"]}]
37:["$","$1","50",{"children":["$","$L20","mdx-55",{"sx":{"mb":3,"background":"rgba(255, 255, 255, 0.05)","borderRadius":2,"border":"1px solid rgba(255, 255, 255, 0.1)","p":3,"mt":2,"overflow":"auto"},"children":["$","div",null,{"className":"codeblock-container","style":{"position":"relative"},"children":[["$","$L6c",null,{"code":"await db.todoItems.where({ todoListId: todoListId }).modify({ done: true })\n"}],["$","pre",null,{"className":"prism-ts","children":["$","code",null,{"className":"prism-ts code-highlight","dangerouslySetInnerHTML":{"__html":"<span class=\"token keyword\">await</span> db<span class=\"token punctuation\">.</span>todoItems<span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> todoListId<span class=\"token operator\">:</span> todoListId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">modify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> done<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n"}}]}]]}]}]}]
38:["$","$L21","mdx-56",{"variant":"body1","component":"div","paragraph":true,"children":"The intension here is to set all todo-items to done for the entire list. The intension is articulated using a where-clause and we'll describe below how this intention will affect the sync operation to maintain the intended consistency."}]
39:["$","$L21","mdx-57",{"variant":"h3","component":"h3","gutterBottom":true,"sx":{"mt":3},"children":"Offline consistency"}]
3a:["$","$L21","mdx-60",{"variant":"body1","component":"div","paragraph":true,"children":["Given our previous operation to set all todoItems' ",["$","$L20","mdx-58",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"done"}]," to ",["$","$L20","mdx-59",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"true"}]," for a certain todoList; what if you were offline when you made the operation, and your client is not aware of some additional todo-items that has been added during your offline period? When the sync takes place, the where-expression will execute on the server data and if other items had been added to the list, they will also be updated. And items that had been removed from the list would not be affected by the operation (a roll-back will happen for these as if they were never affected by the operation)."]}]
3b:["$","$L21","mdx-61",{"variant":"body1","component":"div","paragraph":true,"children":"Example:"}]
3c:["$","$L23","mdx-68",{"component":"ol","sx":{"mb":3,"pl":4,"listStyleType":"decimal","& .MuiListItem-root":{"display":"list-item","pl":1}},"children":["\n",["$","$L24","mdx-62",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"You commit the transaction locally while offline. It affects Todo-item A, B and C (which is the current items in the list on your offline copy and on the server as well)."}],"\n",["$","$L24","mdx-63",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Another online client adds a new Todo-item D to the list and removes Todo-item A. It syncs the operation eagerly, so now the server has a list with items B, C and D."}],"\n",["$","$L24","mdx-64",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Your client goes online and syncs the operation."}],"\n",["$","$L24","mdx-65",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"Server adjust your operation according to changes made after your last sync. It only applies the operation on Todo-items B, C and D but not on A."}],"\n",["$","$L24","mdx-67",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":["Server sends back a list of operations that will make the client roll-back Todo-item A with to how it is on the server, as if the operation had not affected Todo-item A. The list of operations also contains an add-operation for Todo-item D with ",["$","$L20","mdx-66",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"{done: true}"}]," because of the operation has affected Todo-item D due to the where-clause of the operation."]}],"\n"]}]
3d:["$","$L21","mdx-69",{"variant":"h3","component":"h3","gutterBottom":true,"sx":{"mt":3},"children":"Consistency Guarantee for Future Syncs"}]
3e:["$","$L21","mdx-71",{"variant":"body1","component":"div","paragraph":true,"children":["Another more advanced trait of this consistency guarantee is the case when there is another client (else than yours) that also mutates its local database in a way that would affect the result of executing your where-clause on the objects they mutate in their operation while being offline. Dexie Cloud guarantees that when that client comes online eventually and syncs, it will have your operation applied consistently onto their not-yet-synced operations, the final outcome of their sync call will stay consistent. For example, if the other client did delete Todo-item B and added a new Todo-item E to your list while it was offline and you synced your operation to mark all todo-items in your list as done (using [Collection.modify()](/docs/Collection/Collection.modify() with a where-clause). When that client goes online again, AFTER your sync was already finished, it will perform your modify operation onto its own modifications before applying them to the server so that Todo-item E also gets the ",["$","$L20","mdx-70",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"done"}]," property set."]}]
3f:["$","$L21","mdx-72",{"variant":"body1","component":"div","paragraph":true,"children":"Flow:"}]
40:["$","$L23","mdx-90",{"component":"ol","sx":{"mb":3,"pl":4,"listStyleType":"decimal","& .MuiListItem-root":{"display":"list-item","pl":1}},"children":["\n",["$","$L24","mdx-74",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":["\n",["$","$L21","mdx-73",{"variant":"body1","component":"div","paragraph":true,"children":"Other client (currently offline) adds new Todo-item E to the list."}],"\n"]}],"\n",["$","$L24","mdx-77",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":["\n",["$","$L21","mdx-76",{"variant":"body1","component":"div","paragraph":true,"children":["You sync your consistent operation with the server ",["$","$L20","mdx-75",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"db.todoItems.where({todoListId: todoListId}).modify({done: true})"}]]}],"\n"]}],"\n",["$","$L24","mdx-79",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":["\n",["$","$L21","mdx-78",{"variant":"body1","component":"div","paragraph":true,"children":"Other client goes online and sends its changes to the server."}],"\n"]}],"\n",["$","$L24","mdx-85",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":["\n",["$","$L21","mdx-80",{"variant":"body1","component":"div","paragraph":true,"children":"Server will apply your modify operation against the other client's changes before applying them because that client's last sync happened before your operation was synced, so:"}],"\n",["$","$L23","mdx-84",{"sx":{"mb":3,"listStyleType":"disc","pl":3,"& .MuiListItem-root":{"display":"list-item","pl":0}},"children":["\n",["$","$L24","mdx-81",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"The operation to add Todo-item E will be affected by your operation because the where-expression of your modify operation evaluates true."}],"\n",["$","$L24","mdx-83",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":["Your modify operation (to set ",["$","$L20","mdx-82",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"{done: true}"}]," on the item) is applied as a pseudo-operation for the client."]}],"\n"]}],"\n"]}],"\n",["$","$L24","mdx-89",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":["\n",["$","$L21","mdx-88",{"variant":"body1","component":"div","paragraph":true,"children":["The end result will be that the Todo-list has item B, C, D and E - all with ",["$","$L20","mdx-86",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"{done: true}"}]," which is fully consistent with the original intention of your operation ",["$","$L20","mdx-87",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"db.todoItems.where({todoListId: todoListId}).modify({done: true})"}],"."]}],"\n"]}],"\n"]}]
41:["$","$L21","mdx-91",{"variant":"body1","component":"div","paragraph":true,"children":"Basically, where-based modify- and delete-operations persist on the server until all clients have synced, and the operations can evaluate also onto future sync operations from other clients that was not aware of your operation when they did their operations."}]
42:["$","$L21","mdx-92",{"variant":"h2","component":"h2","gutterBottom":true,"sx":{"mt":4},"children":"Update Operations"}]
43:["$","$L21","mdx-97",{"variant":"body1","component":"div","paragraph":true,"children":["Update-operations manipulate individual properties rather than replacing entire objects. Update operations prohibit conflicts when two different clients mutate different properties on the same object. This requires that the dexie operation to update was a ",["$","$L22","mdx-93",{"href":"/docs/Table/Table.update()","color":"primary","sx":{"fontWeight":600},"underline":"hover","children":"Table.update()"}]," (or ",["$","$L22","mdx-94",{"href":"/docs/Collection/Collection.modify()","color":"primary","sx":{"fontWeight":600},"underline":"hover","children":"Collection.modify()"}]," with a where-clause using equality comparison on primary key) and that the provided changes was an object that listed the properties to update (not a JS callback). If ",["$","$L22","mdx-95",{"href":"/docs/Table/Table.put()","color":"primary","sx":{"fontWeight":600},"underline":"hover","children":"Table.put()"}]," however was used instead of ",["$","$L22","mdx-96",{"href":"/docs/Table/Table.update()","color":"primary","sx":{"fontWeight":600},"underline":"hover","children":"Table.update()"}],", the intention would be to actually replace the entire object and will therefore overwrite another update or put operation and not allow for two clients updating different props."]}]
44:["$","$L21","mdx-101",{"variant":"body1","component":"div","paragraph":true,"children":["Update operations avoid conflicts as long as the different clients updates different properties on the object, but if two different clients update the same property, the latest performed operation will overwrite the previous one. An example would be a Todo item's ",["$","$L20","mdx-98",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"done"}]," property. If user A sets ",["$","$L20","mdx-99",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"{done: true}"}]," on the same object as user B sets ",["$","$L20","mdx-100",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"{done: false}"}]," the operation that was performed latest in time will be the one that overwrites the other. The timestamp of when the actual operation took place on the client, decides which operation will overwrite the other. This timestamp is adjusted to each client's time-diff against the server."]}]
45:["$","$L21","mdx-102",{"variant":"h2","component":"h2","gutterBottom":true,"sx":{"mt":4},"children":"Consistently add or remove unique entries to sets of strings or numbers"}]
46:["$","$L21","mdx-108",{"variant":"body1","component":"div","paragraph":true,"children":["Update- and modify operations take an object containing the properties to update. The value to be set can either be a plain value (such as ",["$","$L20","mdx-103",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"{name: \"Foo\"}"}]," which will update the \"name\" property to \"Foo\") but can also be a consistent operation on the property such as mathematical add(2) or set manipulation remove([\"foo\"]). This can be utilized to modify the property relative to its current value. When working with array properties that represent a set of strings or numbers (such as ",["$","$L20","mdx-104",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"tags"}]," or ",["$","$L20","mdx-105",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"hobbies"}],"), the consistent operations ",["$","$L20","mdx-106",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"add()"}]," and ",["$","$L20","mdx-107",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"remove()"}]," can be used to manipulate the array consistently across sync rather than replacing the whole array. See [/docs/add()] and [/docs/remove()]. This has a meaning when multiple clients eventually syncs with a server."]}]
47:["$","$L21","mdx-109",{"variant":"h2","component":"h2","gutterBottom":true,"sx":{"mt":4},"children":"Consistent addition / subtraction"}]
48:["$","$L21","mdx-110",{"variant":"body1","component":"div","paragraph":true,"children":"Number or BigInt properties can be manipulated using addition or subtraction that is consistent across sync.\nSee [/docs/add()] and [/docs/remove()]."}]
49:["$","$L21","mdx-111",{"variant":"h2","component":"h2","gutterBottom":true,"sx":{"mt":4},"children":"Consistent Tree Structures"}]
4a:["$","$L21","mdx-113",{"variant":"body1","component":"div","paragraph":true,"children":["One pattern for managing tree structures in a database is to have an indexed property representing the path to the parent node, such as ",["$","$L20","mdx-112",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"parentPath"}],". This makes it efficient to delete or list all descendants in one query without any need of recursion:"]}]
6e:T82b,// Add new node
function addNode(childProps, parentId = null) {
  return db.transaction('rw', db.treeNodes, async ()=> {
    const parent = parentId && await db.treeNodes.get(parentId);
    await db.treeNodes.add({
      ...childProps,
      parentPath: parent
        ? `${parent.parentPath}${parent.id}/`
        : '' // If no parent, parentPath will be empty string (added at the root)
    });
  }
}

// List direct children
function listChildren(node) {
  return db.treeNodes.where({parentPath: `${node.parentPath}${node.id}/`}).toArray();
}

// List all descendants without recursion:
function listAllDescendants(node) {
  return db.treeNodes.where('parentPath').startsWith(`${node.parentPath}${node.id}/`).toArray();
}

// Load parent
function loadParent(node) {
  return db.treeNodes.get(node.parentPath.split('/').at(-2));
}

// Load all ancestors
function async loadAllAncestors(node) {
  return (node.parentPath
    ? await db.treeNodes.bulkGet(node.parentPath.substring(0, node.parentPath.length - 1).split('/'))
    : []
  );
}

// Delete the node and all its descendants:
function deleteNode(node) {
  return db.transaction('rw', db.treeNodes, () => {
    db.treeNodes.where('parentPath')
      .startsWith(`${node.parentPath}${node.id}/`)
      .delete();
    db.treeNodes.where({
      parentPath: node.parentPath, // for consistence
      id: node.id
    }).delete();
  });
}


// Move subtree with sync consistency:
import { replacePrefix } from 'dexie';

function moveNode(node, newParentPath) {
  return db.transaction('rw', db.treeNodes, () => {
    // Move node
    db.treeNodes.where({
      parentPath: node.parentPath, // consistency-check
      id: node.id
    }).modify({
      parentPath: newParentPath
    });
    // Move all its descendants in relation to their sub path:
    db.treeNodes
      .where('parentPath')
      .startsWith(`${node.parentPath}${node.id}/`)
      .modify({
        // Here we're in a declarative object - not a JS callback - ==> Consistent operation.
        parentPath: replacePrefix(node.parentPath, newParentPath);
      });
  });
}
6f:T3eed,<span class="token comment">// Add new node</span>
<span class="token keyword">function</span> <span class="token function">addNode</span><span class="token punctuation">(</span>childProps<span class="token punctuation">,</span> parentId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token string">'rw'</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> parent <span class="token operator">=</span> parentId <span class="token operator">&amp;&amp;</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>parentId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>childProps<span class="token punctuation">,</span>
      parentPath<span class="token operator">:</span> parent
        <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>parent<span class="token punctuation">.</span>parentPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>parent<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span>
        <span class="token operator">:</span> <span class="token string">''</span> <span class="token comment">// If no parent, parentPath will be empty string (added at the root)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// List direct children</span>
<span class="token keyword">function</span> <span class="token function">listChildren</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span>parentPath<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>parentPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// List all descendants without recursion:</span>
<span class="token keyword">function</span> <span class="token function">listAllDescendants</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'parentPath'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>parentPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Load parent</span>
<span class="token keyword">function</span> <span class="token function">loadParent</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>parentPath<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Load all ancestors</span>
<span class="token keyword">function</span> <span class="token keyword">async</span> <span class="token function">loadAllAncestors</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>parentPath
    <span class="token operator">?</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">.</span><span class="token function">bulkGet</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>parentPath<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> node<span class="token punctuation">.</span>parentPath<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Delete the node and all its descendants:</span>
<span class="token keyword">function</span> <span class="token function">deleteNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token string">'rw'</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'parentPath'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>parentPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      parentPath<span class="token operator">:</span> node<span class="token punctuation">.</span>parentPath<span class="token punctuation">,</span> <span class="token comment">// for consistence</span>
      id<span class="token operator">:</span> node<span class="token punctuation">.</span>id
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// Move subtree with sync consistency:</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> replacePrefix <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dexie'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">moveNode</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> newParentPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token string">'rw'</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// Move node</span>
    db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      parentPath<span class="token operator">:</span> node<span class="token punctuation">.</span>parentPath<span class="token punctuation">,</span> <span class="token comment">// consistency-check</span>
      id<span class="token operator">:</span> node<span class="token punctuation">.</span>id
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      parentPath<span class="token operator">:</span> newParentPath
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Move all its descendants in relation to their sub path:</span>
    db<span class="token punctuation">.</span>treeNodes
      <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'parentPath'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>parentPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// Here we're in a declarative object - not a JS callback - ==> Consistent operation.</span>
        parentPath<span class="token operator">:</span> <span class="token function">replacePrefix</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>parentPath<span class="token punctuation">,</span> newParentPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
4b:["$","$1","90",{"children":["$","$L20","mdx-114",{"sx":{"mb":3,"background":"rgba(255, 255, 255, 0.05)","borderRadius":2,"border":"1px solid rgba(255, 255, 255, 0.1)","p":3,"mt":2,"overflow":"auto"},"children":["$","div",null,{"className":"codeblock-container","style":{"position":"relative"},"children":[["$","$L6c",null,{"code":"$6e"}],["$","pre",null,{"className":"prism-ts","children":["$","code",null,{"className":"prism-ts code-highlight","dangerouslySetInnerHTML":{"__html":"$6f"}}]}]]}]}]}]
4c:["$","$L21","mdx-116",{"variant":"body1","component":"div","paragraph":true,"children":["All the mutating operations above are also ",["$","$L22","mdx-115",{"href":"https://dexie.org/cloud/docs/consistency#consistent-modify--and-delete-operations","color":"primary","sx":{"fontWeight":600},"underline":"hover","target":"_blank","rel":"noopener noreferrer","children":"sync consistent"}],": If one offline client adds a child under \"/a/b/c\" and another offline client modifies all descendants under \"/a/b/c\" to have a new property {color: \"blue\"}, the merge of these operation will set {color: \"blue\"} on the added child also no matter in which order the clients became online."]}]
4d:["$","$L21","mdx-117",{"variant":"h2","component":"h2","gutterBottom":true,"sx":{"mt":4},"children":"The new support for moving trees"}]
4e:["$","$L21","mdx-118",{"variant":"body1","component":"div","paragraph":true,"children":"But modify-operations that use a JS callback does not benefit from sync consistency, only local consistency. Moving an entire tree from one node to another has been one of those operation that need a JS function because the new parentPath's value depends on its existing value. So a tree move has only been possible with local consistency but not sync consistency before:"}]
70:T107a,<span class="token keyword">function</span> <span class="token function">moveNode</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> newParentPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token string">'rw'</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// Move node. Having the parentPath criteria here is for consistency:</span>
    <span class="token comment">// Only perform the 2 moves if parentPath is still the same.</span>
    db<span class="token punctuation">.</span>treeNodes
      <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parentPath<span class="token operator">:</span> node<span class="token punctuation">.</span>parentPath<span class="token punctuation">,</span>
        id<span class="token operator">:</span> node<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parentPath<span class="token operator">:</span> newParentPath<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// Move all its descendants in relation to their sub path:</span>
    db<span class="token punctuation">.</span>treeNodes
      <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'parentPath'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>parentPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token comment">// This is a JS callback that cannot be expressed to the server</span>
        node<span class="token punctuation">.</span>parentPath <span class="token operator">=</span>
          newParentPath <span class="token operator">+</span> node<span class="token punctuation">.</span>parentPath<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>parentPath<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
4f:["$","$1","98",{"children":["$","$L20","mdx-119",{"sx":{"mb":3,"background":"rgba(255, 255, 255, 0.05)","borderRadius":2,"border":"1px solid rgba(255, 255, 255, 0.1)","p":3,"mt":2,"overflow":"auto"},"children":["$","div",null,{"className":"codeblock-container","style":{"position":"relative"},"children":[["$","$L6c",null,{"code":"function moveNode(node, newParentPath) {\n  return db.transaction('rw', db.treeNodes, () => {\n    // Move node. Having the parentPath criteria here is for consistency:\n    // Only perform the 2 moves if parentPath is still the same.\n    db.treeNodes\n      .where({\n        parentPath: node.parentPath,\n        id: node.id,\n      })\n      .modify({\n        parentPath: newParentPath,\n      })\n    // Move all its descendants in relation to their sub path:\n    db.treeNodes\n      .where('parentPath')\n      .startsWith(`${node.parentPath}${node.id}/`)\n      .modify((node) => {\n        // This is a JS callback that cannot be expressed to the server\n        node.parentPath =\n          newParentPath + node.parentPath.substring(node.parentPath.length)\n      })\n  })\n}\n"}],["$","pre",null,{"className":"prism-ts","children":["$","code",null,{"className":"prism-ts code-highlight","dangerouslySetInnerHTML":{"__html":"$70"}}]}]]}]}]}]
50:["$","$L21","mdx-120",{"variant":"body1","component":"div","paragraph":true,"children":"JS code cannot securely be sent to the server due to several reasons: closures information missing + the risk of sending code that injects arbitrary code on the server. The operation above won't be sync consistent. If an offline client did add a new node under /a/b/c and that node is moved to /x/y/z, the merging of these operations would not be consistent - a node would still be placed under /a/b/c even though the c node has moved and doesn't exist anymore. So there is a need for declarative ways of doing certain operations, and moving trees is one of them."}]
51:["$","$L21","mdx-123",{"variant":"body1","component":"div","paragraph":true,"children":["A new export ",["$","$L20","mdx-121",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"replacePrefix"}]," now available for this purpose. We will add more of these in coming versions (such as increment, push, deleteArrayItem, etc). ",["$","$L20","mdx-122",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"replacePrefix"}]," is the first \"complex\" operation that already has support in Dexie Cloud (if upgrading dexie-cloud-addon to 4.0.1-beta.58) and can be executed to perform sync consistent tree moves:"]}]
71:T107a,<span class="token keyword">import</span> <span class="token punctuation">{</span> replacePrefix <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dexie'</span><span class="token punctuation">;</span>

<span class="token comment">// Move subtree with sync consistency:</span>
<span class="token keyword">function</span> <span class="token function">moveNode</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> newParentPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token string">'rw'</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// Move node</span>
    db<span class="token punctuation">.</span>treeNodes<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      parentPath<span class="token operator">:</span> node<span class="token punctuation">.</span>parentPath<span class="token punctuation">,</span> <span class="token comment">// consistency-check</span>
      id<span class="token operator">:</span> node<span class="token punctuation">.</span>id
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      parentPath<span class="token operator">:</span> newParentPath
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Move all its descendants in relation to their sub path:</span>
    db<span class="token punctuation">.</span>treeNodes
      <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'parentPath'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>parentPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// Here we're in a declarative object - not a JS callback - ==> Consistent operation.</span>
        parentPath<span class="token operator">:</span> <span class="token function">replacePrefix</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>parentPath<span class="token punctuation">,</span> newParentPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

52:["$","$1","104",{"children":["$","$L20","mdx-124",{"sx":{"mb":3,"background":"rgba(255, 255, 255, 0.05)","borderRadius":2,"border":"1px solid rgba(255, 255, 255, 0.1)","p":3,"mt":2,"overflow":"auto"},"children":["$","div",null,{"className":"codeblock-container","style":{"position":"relative"},"children":[["$","$L6c",null,{"code":"import { replacePrefix } from 'dexie';\n\n// Move subtree with sync consistency:\nfunction moveNode(node, newParentPath) {\n  return db.transaction('rw', db.treeNodes, () => {\n    // Move node\n    db.treeNodes.where({\n      parentPath: node.parentPath, // consistency-check\n      id: node.id\n    }).modify({\n      parentPath: newParentPath\n    });\n    // Move all its descendants in relation to their sub path:\n    db.treeNodes\n      .where('parentPath')\n      .startsWith(`${node.parentPath}${node.id}/`)\n      .modify({\n        // Here we're in a declarative object - not a JS callback - ==> Consistent operation.\n        parentPath: replacePrefix(node.parentPath, newParentPath);\n      });\n  });\n}\n\n"}],["$","pre",null,{"className":"prism-ts","children":["$","code",null,{"className":"prism-ts code-highlight","dangerouslySetInnerHTML":{"__html":"$71"}}]}]]}]}]}]
53:["$","$L21","mdx-126",{"variant":"body1","component":"div","paragraph":true,"children":["This transaction does it all - it moves the node and all its descendants consistently in one atomic all-or-nothing transaction but also preserves the where-condition and the ",["$","$L20","mdx-125",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"replacePrefix"}]," operation in the information to the server so that if an offline client added a node under /a/b/c, and then this operation happened, moving all descendants to the new location, and then the offline client comes online again and syncs, the new node would be placed on the correct new location and be hanging below a non-existing /a/b/c."]}]
54:["$","$L21","mdx-127",{"variant":"h3","component":"h3","gutterBottom":true,"sx":{"mt":3},"children":"Consistency in conflicting move operations"}]
55:["$","$L21","mdx-128",{"variant":"body1","component":"div","paragraph":true,"children":"If two operations competes in a move operation involving the same nodes, consistency is maintained by the extra criteria on parentPath in both the move of the parent node and the operation to move its descendants. A move operation will not be performed if another move operation came first. The end result will always be a consistent tree. The last syncer might then experience that the move operation they made got rolled back after a sync and they would instead see the peer's hierarchy."}]
56:["$","$L21","mdx-129",{"variant":"h3","component":"h3","gutterBottom":true,"sx":{"mt":3},"children":"Remove unique item from array property"}]
57:["$","$L21","mdx-130",{"variant":"h2","component":"h2","gutterBottom":true,"sx":{"mt":4},"children":"Tied Realms"}]
58:["$","$L21","mdx-131",{"variant":"body1","component":"div","paragraph":true,"children":"Tied realms are for objects that are created as private but may be shared later on."}]
59:["$","$L21","mdx-134",{"variant":"body1","component":"div","paragraph":true,"children":["All database objects in Dexie Cloud have a ",["$","$L20","mdx-132",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"realmId"}]," property (defaulting to current user's private realmId). The realmId represents which access-realm an object belongs to. When a realmId is not given for an object, it will default to the built-in private realm for the current user, representing private access. Those objects can be considered private, such as a private todo-list with private todo-items in it. If a private object needs to be shared, you would typically need to create a new realm, add members to the new realm and move the related entities into that new realm by updating their ",["$","$L20","mdx-133",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"realmId"}]," property."]}]
5a:["$","$L21","mdx-135",{"variant":"body1","component":"div","paragraph":true,"children":"If we would just create a new realm with a random new ID and move our entities into it, it would work in most scenarios. The problem would arise when two different clients would do this with the same entities while they are both offline (the clients may belong to the same user and therefore have access to the private realm of the user). Another problem occurs when an offline deletes an object without knowing that the object was shared / moved into a new realm, but we didn't know of this new realm when deleting the object (we were offline when object was shared by another user) so we missed to delete the object's realm. In the scenario when two offline client both creates a realm for the object (in order to share it), both clients would each create a new realm and when they sync later on, we'd have two realms but only one of the realms would be used while the other would be \"empty\" and be a 'hanging object' that would never be deleted - it would lose it's relation to the entities it was created to control."}]
5b:["$","$L21","mdx-136",{"variant":"h3","component":"h3","gutterBottom":true,"sx":{"mt":3},"children":"getTiedRealmId()"}]
5c:["$","$L21","mdx-141",{"variant":"body1","component":"div","paragraph":true,"children":["The solution to the problem described above is to generate an ID for the realm computed from the ID of the object it should be tied to. This way all offline clients knows the possible ID in case object will be shared, so that it becomes impossible to create multiple realms for the object, and also make sure to always delete any tied realm when deleting the object. Different offline clients would choose the same ID when creating the realm. When they sync later on, the end result would still be a single realm representing the sharing of involved entities. A concrete example: a to-do-list along with its to-do-items. To share the list, you compute realmID from the ToDo-list ID. Then you move the ToDo-list entity along with the ToDo-items to the new realm (by modifying the ",["$","$L20","mdx-137",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"realmId"}]," property of these objects). Then to share the list with someone, you add a ",["$","$L20","mdx-138",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"member"}]," entity to the ",["$","$L20","mdx-139",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"members"}]," table with ",["$","$L20","mdx-140",{"component":"code","sx":{"fontFamily":"monospace","fontSize":"0.875rem","backgroundColor":"rgba(255, 255, 255, 0.1)","px":1,"py":0.5,"borderRadius":1},"children":"realmId"}]," set to the new realm ID. So if client A would share it with User A and client B would share it with User B - both of these operations would sync nicely so that both user A and User B would gain access to the todo-list and its items."]}]
5d:["$","$L21","mdx-142",{"variant":"body1","component":"div","paragraph":true,"children":"And when finally deleting an entity that MAY have a tied realm, application code should also delete the possibly existing realm along with its related entities (todoItems, realm and its members). By doing all these operations within a single Dexie transaction, atomicity is also guaranteed. In the end we have a waterproof and consistent way of managing entire life cycle of entities that may be shared or may be private."}]
72:T691,import { getTiedRealmId } from 'dexie-cloud-addon'

async function shareList(todoList: TodoList) {
  await db.transaction(
    'rw',
    [db.todoLists, db.todoItems, db.realms],
    async () => {
      // Create realm (use put instead of add if other client did the same)
      const newRealmId = getTiedRealmId(todoList.id)
      await db.realms.upsert(newRealmId, {
        name: 'A todo list',
        represents: 'a todo list',
      })
      // Move todo-list into the new realm:
      await db.todoLists.update(todoList.id, { realmId: newRealmId })
      // Move all todo items into the new realm consistently (modify() is consistent across sync peers)
      await db.todoItems
        .where({ todoListId: todoList.id })
        .modify({ realmId: newRealmId })
    }
  )
}

// Consistently delete the list. Also delete its tied realm (even if it is on the private realm)
// Reason for always deleting its tied realm is: What if we are offline, and another client has
// shared the list while we're not yet aware of this. By always deleting a possible tied realm along
// with deleting the list, we make sure that the deletion will also delete the realm if it exists.
async function deleteList(todoList: TodoList) {
  await db.transaction(
    'rw',
    [db.todoLists, db.todoItems, db.realms, db.members],
    () => {
      const tiedRealmId = getTiedRealmId(todoList.id)
      db.todoLists.delete(todoList.id)
      db.todoItems.where({ todoListId: todoList.id }).delete()
      // Empty out any tied realm from members:
      db.members.where({ realmId: tiedRealmId }).delete()
      // Delete the tied realm if it exists:
      db.realms.delete(tiedRealmId)
    }
  )
}
73:T1ec1,<span class="token keyword">import</span> <span class="token punctuation">{</span> getTiedRealmId <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dexie-cloud-addon'</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">shareList</span><span class="token punctuation">(</span>todoList<span class="token operator">:</span> TodoList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span>
    <span class="token string">'rw'</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>db<span class="token punctuation">.</span>todoLists<span class="token punctuation">,</span> db<span class="token punctuation">.</span>todoItems<span class="token punctuation">,</span> db<span class="token punctuation">.</span>realms<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// Create realm (use put instead of add if other client did the same)</span>
      <span class="token keyword">const</span> newRealmId <span class="token operator">=</span> <span class="token function">getTiedRealmId</span><span class="token punctuation">(</span>todoList<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      <span class="token keyword">await</span> db<span class="token punctuation">.</span>realms<span class="token punctuation">.</span><span class="token function">upsert</span><span class="token punctuation">(</span>newRealmId<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'A todo list'</span><span class="token punctuation">,</span>
        represents<span class="token operator">:</span> <span class="token string">'a todo list'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// Move todo-list into the new realm:</span>
      <span class="token keyword">await</span> db<span class="token punctuation">.</span>todoLists<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>todoList<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">{</span> realmId<span class="token operator">:</span> newRealmId <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// Move all todo items into the new realm consistently (modify() is consistent across sync peers)</span>
      <span class="token keyword">await</span> db<span class="token punctuation">.</span>todoItems
        <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span> todoListId<span class="token operator">:</span> todoList<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> realmId<span class="token operator">:</span> newRealmId <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Consistently delete the list. Also delete its tied realm (even if it is on the private realm)</span>
<span class="token comment">// Reason for always deleting its tied realm is: What if we are offline, and another client has</span>
<span class="token comment">// shared the list while we're not yet aware of this. By always deleting a possible tied realm along</span>
<span class="token comment">// with deleting the list, we make sure that the deletion will also delete the realm if it exists.</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">deleteList</span><span class="token punctuation">(</span>todoList<span class="token operator">:</span> TodoList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span>
    <span class="token string">'rw'</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>db<span class="token punctuation">.</span>todoLists<span class="token punctuation">,</span> db<span class="token punctuation">.</span>todoItems<span class="token punctuation">,</span> db<span class="token punctuation">.</span>realms<span class="token punctuation">,</span> db<span class="token punctuation">.</span>members<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> tiedRealmId <span class="token operator">=</span> <span class="token function">getTiedRealmId</span><span class="token punctuation">(</span>todoList<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      db<span class="token punctuation">.</span>todoLists<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>todoList<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      db<span class="token punctuation">.</span>todoItems<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span> todoListId<span class="token operator">:</span> todoList<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// Empty out any tied realm from members:</span>
      db<span class="token punctuation">.</span>members<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span> realmId<span class="token operator">:</span> tiedRealmId <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// Delete the tied realm if it exists:</span>
      db<span class="token punctuation">.</span>realms<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>tiedRealmId<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
5e:["$","$1","128",{"children":["$","$L20","mdx-143",{"sx":{"mb":3,"background":"rgba(255, 255, 255, 0.05)","borderRadius":2,"border":"1px solid rgba(255, 255, 255, 0.1)","p":3,"mt":2,"overflow":"auto"},"children":["$","div",null,{"className":"codeblock-container","style":{"position":"relative"},"children":[["$","$L6c",null,{"code":"$72"}],["$","pre",null,{"className":"prism-ts","children":["$","code",null,{"className":"prism-ts code-highlight","dangerouslySetInnerHTML":{"__html":"$73"}}]}]]}]}]}]
5f:["$","$L21","mdx-144",{"variant":"h2","component":"h2","gutterBottom":true,"sx":{"mt":4},"children":"Private Singleton IDs"}]
60:["$","$L21","mdx-145",{"variant":"body1","component":"div","paragraph":true,"children":"Private Singleton IDs are primary keys that starts with a hash \"#\". They only need to be unique per user and they can be created or referred to no matter whether the user is authenticated or not. When they sync, they can never collide with other user's private IDs even when being identical."}]
61:["$","$L21","mdx-146",{"variant":"body1","component":"div","paragraph":true,"children":"Some examples when private singleton IDs can be useful:"}]
62:["$","$L23","mdx-149",{"sx":{"mb":3,"listStyleType":"disc","pl":3,"& .MuiListItem-root":{"display":"list-item","pl":0}},"children":["\n",["$","$L24","mdx-147",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"You have some personal settings per user and you want the database objects representing a setting to be a singleton instance (one per setting and user)."}],"\n",["$","$L24","mdx-148",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"You want a default placeholder to exist for every user. In a music app, it could be \"Favourite songs\"."}],"\n"]}]
63:["$","$L21","mdx-150",{"variant":"h3","component":"h3","gutterBottom":true,"sx":{"mt":3},"children":"Example: Personal Settings Object"}]
74:T970,<span class="token comment">// Database declaration</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dexie</span><span class="token punctuation">(</span><span class="token string">'MyAppDB'</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stores</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  personalSettings<span class="token operator">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Read setting:</span>
<span class="token keyword">const</span> themeSetting <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span>personalSettings<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'#theme'</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'User theme is:'</span><span class="token punctuation">,</span> themeSetting<span class="token operator">?.</span>value <span class="token operator">??</span> <span class="token string">'default-theme'</span><span class="token punctuation">)</span>

<span class="token comment">// Update setting:</span>
<span class="token keyword">await</span> db<span class="token punctuation">.</span>personalSettings<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'#theme'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'dark-mode'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
64:["$","$1","140",{"children":["$","$L20","mdx-151",{"sx":{"mb":3,"background":"rgba(255, 255, 255, 0.05)","borderRadius":2,"border":"1px solid rgba(255, 255, 255, 0.1)","p":3,"mt":2,"overflow":"auto"},"children":["$","div",null,{"className":"codeblock-container","style":{"position":"relative"},"children":[["$","$L6c",null,{"code":"// Database declaration\nconst db = new Dexie('MyAppDB')\ndb.version(1).stores({\n  personalSettings: 'id',\n})\n\n// Read setting:\nconst themeSetting = await db.personalSettings.get('#theme')\nconsole.log('User theme is:', themeSetting?.value ?? 'default-theme')\n\n// Update setting:\nawait db.personalSettings.put({ id: '#theme', value: 'dark-mode' })\n"}],["$","pre",null,{"className":"prism-ts","children":["$","code",null,{"className":"prism-ts code-highlight","dangerouslySetInnerHTML":{"__html":"$74"}}]}]]}]}]}]
65:["$","$L21","mdx-152",{"variant":"body1","component":"div","paragraph":true,"children":"Like all data in Dexie Cloud, it is allowed to add objects even when not yet authenticated to the server. When user finally authenticates, his or her created objects will get their realmId set to the correct private realmId of the authenticated user and get synced to the server. This goes for private objects only - non-authenticated users may never create or manipulate objects in other realms than the private one."}]
66:["$","$L21","mdx-153",{"variant":"body1","component":"div","paragraph":true,"children":"Adding normal objects with globally unique IDs have a drawback in case you want to avoid multiple instances of an object after logging in to the service and syncing it with existing data (where the action to add the same object had been done by the same user on another client)."}]
67:["$","$L21","mdx-154",{"variant":"body1","component":"div","paragraph":true,"children":"Private IDs prohibits getting multiple instances in these cases. The settings example above is a good example."}]
68:["$","$L23","mdx-161",{"component":"ol","sx":{"mb":3,"pl":4,"listStyleType":"decimal","& .MuiListItem-root":{"display":"list-item","pl":1}},"children":["\n",["$","$L24","mdx-155",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"User opens app on phone and changes the theme to \"light-mode\"."}],"\n",["$","$L24","mdx-156",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"User logs in. The #theme object with value \"light-mode\" is persisted on her account in the cloud."}],"\n",["$","$L24","mdx-157",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"User opens app on desktop (without logging in yet) but now chooses the theme \"dark-mode\"."}],"\n",["$","$L24","mdx-158",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"User logs in. The #theme object with value \"dark-mode\" will overwrite the existing \"light-mode\"."}],"\n",["$","$L24","mdx-159",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"User opens app on a third device where he or she have already logged in before."}],"\n",["$","$L24","mdx-160",{"sx":{"py":0.25,"display":"list-item","pl":2},"children":"The latest #theme object is synced to the client and user will get the latest chosed theme (\"dark-mode\")"}],"\n"]}]
69:["$","$L21","mdx-162",{"variant":"h3","component":"h3","gutterBottom":true,"sx":{"mt":3},"children":"Private Singletons must never be shared"}]
6a:["$","$L21","mdx-163",{"variant":"body1","component":"div","paragraph":true,"children":"An object with an private ID (starting with \"#\") must never be shared but needs to always lie in the private realm. If your app allows for sharing placeholder objects such as To-do lists, music albums or similar, take special care if the placeholder uses a private ID, and if so, disable the possibility to share it."}]
6b:["$","$L20",null,{"component":"footer","sx":{"mt":5,"pt":4,"borderTop":1,"borderColor":"divider","display":"flex","justifyContent":"space-between","flexWrap":"wrap","gap":2},"children":[["$","$L21",null,{"variant":"caption","color":"text.secondary","children":"Cloud/consistency"}],["$","$L21",null,{"variant":"caption","color":"text.secondary","children":["Last updated: ","10/27/2025"]}]]}]
1a:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
16:null
75:I[27201,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/7dd66bdf8a7e5707.js"],"IconMark"]
18:{"metadata":[["$","title","0",{"children":"Consistency in Dexie Cloud | Dexie.js Documentation - Offline-First Database | Dexie.js - Offline-First Database for JavaScript"}],["$","meta","1",{"name":"description","content":"Consistency in Dexie Cloud documentation for Dexie.js. Learn offline-first development with IndexedDB wrapper for JavaScript applications."}],["$","meta","2",{"name":"author","content":"David Fahlander"}],["$","meta","3",{"name":"author","content":"Dexie.js Team"}],["$","meta","4",{"name":"keywords","content":"dexie.js,indexeddb,offline first,javascript database,browser database"}],["$","meta","5",{"name":"creator","content":"David Fahlander"}],["$","meta","6",{"name":"publisher","content":"Dexie.js"}],["$","meta","7",{"name":"robots","content":"index, follow"}],["$","meta","8",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","meta","9",{"name":"category","content":"technology"}],["$","meta","10",{"name":"article:section","content":"Documentation"}],["$","meta","11",{"name":"article:tag","content":"dexie.js, indexeddb, offline first, javascript database, browser database"}],["$","link","12",{"rel":"canonical","href":"https://dexie.org/docs/Cloud/consistency"}],["$","meta","13",{"property":"og:title","content":"Consistency in Dexie Cloud - Dexie.js Documentation"}],["$","meta","14",{"property":"og:description","content":"Consistency in Dexie Cloud documentation for Dexie.js. Learn offline-first development with IndexedDB wrapper for JavaScript applications."}],["$","meta","15",{"property":"og:url","content":"https://dexie.org/docs/Cloud/consistency"}],["$","meta","16",{"property":"og:image","content":"https://dexie.org/assets/images/og-images/og-base.png"}],["$","meta","17",{"property":"og:image:width","content":"1200"}],["$","meta","18",{"property":"og:image:height","content":"630"}],["$","meta","19",{"property":"og:image:alt","content":"Build synced offline-first apps with Dexie"}],["$","meta","20",{"property":"og:type","content":"article"}],["$","meta","21",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","22",{"name":"twitter:title","content":"Consistency in Dexie Cloud - Dexie.js Docs"}],["$","meta","23",{"name":"twitter:description","content":"Consistency in Dexie Cloud documentation for Dexie.js. Learn offline-first development with IndexedDB wrapper for JavaScript applications."}],["$","meta","24",{"name":"twitter:image","content":"https://dexie.org/assets/images/og-images/og-base.png"}],["$","link","25",{"rel":"icon","href":"/favicon.ico?favicon.c269e170.ico","sizes":"48x48","type":"image/x-icon"}],["$","$L75","26",{}]],"error":null,"digest":"$undefined"}
1d:"$18:metadata"
